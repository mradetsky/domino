/**
 * UI-Router Deep State Redirect: redirect to the most recently activated child state
 * @version v1.0.2
 * @link https://ui-router.github.io
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@uirouter/core")):"function"==typeof define&&define.amd?define(["exports","@uirouter/core"],t):t(e["@uirouter/dsr"]=e["@uirouter/dsr"]||{},e["@uirouter/core"])}(this,function(e,t){"use strict";function r(e){function r(e){return e.deepStateRedirect||e.dsr}function n(e){var t=r(e),n=typeof t;if("undefined"!==n){var a,i="string"===n?t:void 0,o="function"===n?t:void 0;if("object"===n){o=t.fn;var s=typeof t.default;"object"===s?i=f.target(t.default.state,t.default.params,t.default.options):"string"===s&&(i=f.target(t.default)),!0===t.params?a=function(){return!0}:Array.isArray(t.params)&&(a=function(e){return-1!==t.params.indexOf(e.id)})}return o=o||function(e,t){return t},{params:a,default:i,fn:o}}}function a(e,r,n,a){void 0===a&&(a=!1),n=n||function(){return!0};var i=e.parameters({inherit:!0}).filter(n);return function(e){var n=t.Param.equals(i,e.triggerParams,r);return a?!n:n}}function i(e,t){var r=n(t).params;e.promise.then(function(){var n=e.to(),i=e.params(),o=f.target(n,i);r?(t.$dsr=(t.$dsr||[]).filter(a(n.$$state(),i,void 0,!0)),t.$dsr.push({triggerParams:i,target:o})):t.$dsr=o})}function o(e){var t=e.options();if(!(t.ignoreDsr||t.custom&&t.custom.ignoreDsr)){var r=n(e.to()),a=s(e.to(),e.params());if(!(a=r.fn(e,a))||a.state()!==e.to())return a}}function s(e,t){var r,i=f.get(e),o=n(i),s=i.$$state();if(o.params){var u=a(s,t,o.params,!1),d=s.$dsr&&s.$dsr.filter(u)[0];r=d&&d.target}else r=s.$dsr;if(r=r||o.default){var c=Object.assign({},t,r.params());r=f.target(r.state(),c,r.options())}return r}var u=e.transitionService,f=e.stateService;return u.onRetain({retained:r},i),u.onEnter({entering:r},i),u.onBefore({to:r},o),{name:"deep-state-redirect",reset:function(e,t){if(e)if(t){var r=f.get(e).$$state();r.$dsr=r.$dsr.filter(a(r,t,null,!0))}else delete f.get(e).$$state().$dsr;else f.get().forEach(function(e){return delete e.$$state().$dsr})},getRedirect:function(e,t){return s(e,t)}}}e.DSRPlugin=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ui-router-dsr.min.js.map
